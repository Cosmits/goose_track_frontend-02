import{d as x,e as m,i as f,j as e,k as p,m as u,a as n,n as d}from"./index-1c3e6e26.js";import{c as y,a as h,F as E,b as j,T as V,V as b,e as _,f as k,g as c,B as v,L as I,i as S,E as $,j as w,A as F}from"./AuthNavigate-b58b76a3.js";import{A as P,a as A,b as L}from"./LoginPage.styled-a8d3f10c.js";import{E as N,S as R}from"./error-66ecfc54.js";import"./toString-ee09ec1d.js";import"./index.esm-b18602fb.js";const l="/goose_track_frontend-02/assets/goose-verify-email-78f8f0e2.png",W="/goose_track_frontend-02/assets/goose-verify-email@2x-f1248e0d.png",T="/goose_track_frontend-02/assets/goose-verify-email-955762c0.webp",q="/goose_track_frontend-02/assets/goose-verify-email@2x-1e208abc.webp",B=({name:i})=>e.jsx($,{name:i,render:s=>e.jsx(w,{children:s})}),C={email:""},M=y().shape({email:h().matches(x.emailRegexp,'Email must contain only digits, letters and . - _ symbols: "example@ukr.net"').email('Invalid email, enter in format "example@ukr.net"').required("Email is required")}),U=()=>{const i=m(),s=f(),o=async(r,{resetForm:a})=>{const{email:t}=r;i(p({email:t})),a(),s("/goose_track_frontend-02/login")};return e.jsx(E,{initialValues:C,validationSchema:M,onSubmit:o,children:({values:r,errors:a,touched:t})=>e.jsxs(j,{children:[e.jsx(V,{children:"Verify Email"}),e.jsxs(b,{children:[e.jsx(_,{htmlFor:"email",className:t.email?a.email?"error":"success":"",children:"Email"}),e.jsx(k,{type:"email",id:"email",name:"email",autoComplete:"off",placeholder:"Enter email",className:t.email?a.email?"error":"success":""}),e.jsx(B,{name:"email"}),a.email&&t.email?e.jsx(c,{src:N}):r.email&&!a.email?e.jsx(c,{src:R}):null]}),e.jsxs(v,{type:"submit",children:["Verify Email",e.jsx(I,{src:S})]})]})})},Q=()=>{const i=m(),s=f(),{verificationToken:o}=u(),[r,a]=n.useState(!1);return n.useEffect(()=>{o&&(async g=>{try{await i(d(g)).unwrap(),a(!0)}catch{}s("/login")})(o)},[i,s,o]),n.useEffect(()=>{r&&s("/goose_track_frontend-02/login")},[s,r]),e.jsxs(P,{children:[e.jsx(A,{children:e.jsx(U,{})}),e.jsx(F,{route:"/login",textContent:"Log In"}),e.jsxs(L,{children:[e.jsx("source",{type:"image/webp",srcSet:`${T} 1x, ${q} 2x`}),e.jsx("source",{type:"image/png",srcSet:`${l} 1x, ${W} 2x`}),e.jsx("img",{src:`${l}`,alt:"Goose registers in the app",width:368,height:521})]})]})};export{Q as default};
