import{d as x,e as m,k as f,j as e,m as d,n as p,a as n,o as u}from"./index-8aedb9e5.js";import{A as y,a as h,b as E}from"./LoginPage.styled-a13fe020.js";import{T as j,V,b,c as _,d as c,B as k,L as v,f as I,E as S,A as $}from"./AuthNavigate-b1af17bd.js";import{c as w,a as F,F as P,b as A,E as L,S as N,d as R}from"./error-dcc9dc46.js";import"./index.esm-e2534fba.js";import"./toString-ee09ec1d.js";const l="/goose_track_frontend-02/assets/goose-verify-email-78f8f0e2.png",W="/goose_track_frontend-02/assets/goose-verify-email@2x-f1248e0d.png",T="/goose_track_frontend-02/assets/goose-verify-email-955762c0.webp",q="/goose_track_frontend-02/assets/goose-verify-email@2x-1e208abc.webp",B=({name:i})=>e.jsx(R,{name:i,render:s=>e.jsx(S,{children:s})}),C={email:""},M=w().shape({email:F().matches(x.emailRegexp,'Email must contain only digits, letters and . - _ symbols: "example@ukr.net"').email('Invalid email, enter in format "example@ukr.net"').required("Email is required")}),U=()=>{const i=m(),s=f(),o=async(r,{resetForm:a})=>{const{email:t}=r;i(d({email:t})),a(),s("/goose_track_frontend-02/login")};return e.jsx(P,{initialValues:C,validationSchema:M,onSubmit:o,children:({values:r,errors:a,touched:t})=>e.jsxs(A,{children:[e.jsx(j,{children:"Verify Email"}),e.jsxs(V,{children:[e.jsx(b,{htmlFor:"email",className:t.email?a.email?"error":"success":"",children:"Email"}),e.jsx(_,{type:"email",id:"email",name:"email",autoComplete:"off",placeholder:"Enter email",className:t.email?a.email?"error":"success":""}),e.jsx(B,{name:"email"}),a.email&&t.email?e.jsx(c,{src:L}):r.email&&!a.email?e.jsx(c,{src:N}):null]}),e.jsxs(k,{type:"submit",children:["Verify Email",e.jsx(v,{src:I})]})]})})},Q=()=>{const i=m(),s=f(),{verificationToken:o}=p(),[r,a]=n.useState(!1);return n.useEffect(()=>{o&&(async g=>{try{await i(u(g)).unwrap(),a(!0)}catch{}s("/login")})(o)},[i,s,o]),n.useEffect(()=>{r&&s("/goose_track_frontend-02/login")},[s,r]),e.jsxs(y,{children:[e.jsx(h,{children:e.jsx(U,{})}),e.jsx($,{route:"/login",textContent:"Log In"}),e.jsxs(E,{children:[e.jsx("source",{type:"image/webp",srcSet:`${T} 1x, ${q} 2x`}),e.jsx("source",{type:"image/png",srcSet:`${l} 1x, ${W} 2x`}),e.jsx("img",{src:`${l}`,alt:"Goose registers in the app",width:368,height:521})]})]})};export{Q as default};
