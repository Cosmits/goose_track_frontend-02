import{d as x,e as g,h as u,j as e,i as p,Q as n,k as d,a as c,m as y}from"./index-42e5244a.js";import{F as h,a as E,T as j,V,b,c as v,d as m,E as _,S as k,B as S,f as I,g as w,h as $,i as A,A as F}from"./AuthNavigate-e6bd428f.js";import{A as P,a as L,b as N}from"./LoginPage.styled-6c57bba9.js";import{c as R,a as W}from"./index.esm-6dbee65a.js";import"./toString-ee09ec1d.js";import"./index.esm-b23184a0.js";const f="/goose_track_frontend-02/assets/goose-verify-email-78f8f0e2.png",T="/goose_track_frontend-02/assets/goose-verify-email@2x-f1248e0d.png",q="/goose_track_frontend-02/assets/goose-verify-email-955762c0.webp",B="/goose_track_frontend-02/assets/goose-verify-email@2x-1e208abc.webp",C=({name:r})=>e.jsx($,{name:r,render:s=>e.jsx(A,{children:s})}),M={email:""},U=R().shape({email:W().matches(x.emailRegexp,'Email must contain only digits, letters and . - _ symbols: "example@ukr.net"').email('Invalid email, enter in format "example@ukr.net"').required("Email is required")}),D=()=>{const r=g(),s=u(),o=async(i,{resetForm:a})=>{const{email:t}=i;try{await r(p({email:t})),a(),s("/goose_track_frontend-02/login"),n.success("Sent verify email successfully")}catch{n.error("Error sent verify email")}};return e.jsx(h,{initialValues:M,validationSchema:U,onSubmit:o,children:({values:i,errors:a,touched:t})=>e.jsxs(E,{children:[e.jsx(j,{children:"Verify Email"}),e.jsxs(V,{children:[e.jsx(b,{htmlFor:"email",className:t.email?a.email?"error":"success":"",children:"Email"}),e.jsx(v,{type:"email",id:"email",name:"email",autoComplete:"off",placeholder:"Enter email",className:t.email?a.email?"error":"success":""}),e.jsx(C,{name:"email"}),a.email&&t.email?e.jsx(m,{src:_}):i.email&&!a.email?e.jsx(m,{src:k}):null]}),e.jsxs(S,{type:"submit",children:["Verify Email",e.jsx(I,{src:w})]})]})})},X=()=>{const r=g(),s=u(),{verificationToken:o}=d(),[i,a]=c.useState(!1);return c.useEffect(()=>{o&&(async l=>{try{await r(y(l)).unwrap(),n.success("Verification Account successfully"),a(!0)}catch{n.error("Error verification account")}s("/login")})(o)},[r,s,o]),c.useEffect(()=>{i&&s("/goose_track_frontend-02/login")},[s,i]),e.jsxs(P,{children:[e.jsx(L,{children:e.jsx(D,{})}),e.jsx(F,{route:"/login",textContent:"Log In"}),e.jsxs(N,{children:[e.jsx("source",{type:"image/webp",srcSet:`${q} 1x, ${B} 2x`}),e.jsx("source",{type:"image/png",srcSet:`${f} 1x, ${T} 2x`}),e.jsx("img",{src:`${f}`,alt:"Goose registers in the app",width:368,height:521})]})]})};export{X as default};
