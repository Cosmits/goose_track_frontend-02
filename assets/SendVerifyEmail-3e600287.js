import{d as u,e as f,j as e,h as p,i as d,a as o,k as x,m as y,Q as c}from"./index-00b21907.js";import{T as h,V as E,a as j,b as V,c as l,E as b,S as _,B as S,e as k,f as v,g as w,A as I}from"./AuthNavigate-872a1698.js";import{A as $,a as A,b as F}from"./LoginPage.styled-2ce46061.js";import{F as P,a as L,E as N}from"./formik.esm-5593c883.js";import{c as R,a as T}from"./index.esm-32f24d90.js";import"./index.esm-d39202d5.js";import"./toString-ee09ec1d.js";const m="/goose_track_frontend-02/assets/goose-verify-email-78f8f0e2.png",W="/goose_track_frontend-02/assets/goose-verify-email@2x-f1248e0d.png",q="/goose_track_frontend-02/assets/goose-verify-email-955762c0.webp",B="/goose_track_frontend-02/assets/goose-verify-email@2x-1e208abc.webp",C=({name:r})=>e.jsx(N,{name:r,render:s=>e.jsx(w,{children:s})}),M={email:""},U=R().shape({email:T().matches(u.emailRegexp,'Email must contain only digits, letters and . - _ symbols: "example@ukr.net"').email('Invalid email, enter in format "example@ukr.net"').required("Email is required")}),D=()=>{const r=f(),s=(t,{resetForm:a})=>{const{email:i}=t;r(p({email:i})).unwrap(),a()};return e.jsx(P,{initialValues:M,validationSchema:U,onSubmit:s,children:({values:t,errors:a,touched:i})=>e.jsxs(L,{children:[e.jsx(h,{children:"Verify Email"}),e.jsxs(E,{children:[e.jsx(j,{htmlFor:"email",className:i.email?a.email?"error":"success":"",children:"Email"}),e.jsx(V,{type:"email",id:"email",name:"email",autoComplete:"off",placeholder:"Enter email",className:i.email?a.email?"error":"success":""}),e.jsx(C,{name:"email"}),a.email&&i.email?e.jsx(l,{src:b}):t.email&&!a.email?e.jsx(l,{src:_}):null]}),e.jsxs(S,{type:"submit",children:["Verify Email",e.jsx(k,{src:v})]})]})})},Z=()=>{const r=f(),s=d(),{pathname:t}=window.location,[a,i]=o.useState(!1),{verificationToken:n}=x();return o.useEffect(()=>{n&&(async g=>{try{await r(y(g)).unwrap(),c.success("Verification Account successfully"),console.log("ðŸš€ ~ file: SendVerifyEmail.jsx:33 ~ tryVerify ~ asd:"),i(!0),s("/login")}catch{c.error("Something went wrong. Try again")}})(n)},[r,s,n]),o.useEffect(()=>{s("/login")},[t!=="/goose_track_frontend-02/send-verify-email"]),o.useEffect(()=>{a&&s("/goose_track_frontend-02/login")},[s,a]),e.jsxs($,{children:[e.jsx(A,{children:e.jsx(D,{})}),e.jsx(I,{route:"/login",textContent:"Log In"}),e.jsxs(F,{children:[e.jsx("source",{type:"image/webp",srcSet:`${q} 1x, ${B} 2x`}),e.jsx("source",{type:"image/png",srcSet:`${m} 1x, ${W} 2x`}),e.jsx("img",{src:`${m}`,alt:"Goose registers in the app",width:368,height:521})]})]})};export{Z as default};
